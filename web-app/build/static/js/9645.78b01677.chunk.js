"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[614,9645],{30614:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var s=n(65043),o=n(94141),i=n(89923),a=n(56629),l=n(53518),r=n(77403),d=n(64159),c=n(21383),u=n(70579);const h=e=>{let{modalOpen:t,onClose:n,bucket:h,prefilledRoute:m}=e;const x=(0,c.jL)(),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)("readonly");(0,s.useEffect)((()=>{m&&j(m)}),[m]);return(0,u.jsx)(o.A,{modalOpen:t,title:"Add Anonymous Access Rule",onClose:n,titleIcon:(0,u.jsx)(i.No_,{}),children:(0,u.jsxs)(i.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(i.cl_,{value:p,label:"Prefix",id:"prefix",name:"prefix",placeholder:"Enter Prefix",onChange:e=>{j(e.target.value)},tooltip:"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy."}),(0,u.jsx)(i.l6P,{id:"access",name:"Access",onChange:e=>{g(e)},label:"Access",value:b,options:[{label:"readonly",value:"readonly"},{label:"writeonly",value:"writeonly"},{label:"readwrite",value:"readwrite"}],disabled:!1,helpTip:(0,u.jsx)(s.Fragment,{children:"Select the desired level of access available to unauthenticated Users"}),helpTipPlacement:"right"}),(0,u.jsxs)(i.xA9,{item:!0,xs:12,sx:r.Uz.modalButtonBar,children:[(0,u.jsx)(i.$nd,{id:"clear",type:"button",variant:"regular",onClick:()=>{j(""),g("readonly")},label:"Clear"}),(0,u.jsx)(i.$nd,{id:"add-access-save",type:"submit",variant:"callAction",disabled:""===p.trim(),onClick:()=>{a.F.bucket.setAccessRuleWithBucket(h,{prefix:p,access:b}).then((e=>{x((0,d.Hk)("Access Rule added successfully")),n()})).catch((e=>{x((0,d.C9)((0,l.S)(e.error))),n()}))},label:"Save"})]})]})})}},39645:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Me});var s=n(65043),o=n(22166),i=n(73216),a=n(56629),l=n(21383),r=n(99161),d=n(6035),c=n(33097),u=n.n(c),h=n(89923),m=n(53518),x=n(68424),p=n(24241),j=n(56483),b=n(61476),g=n.n(b),_=n(94574),f=n(35475),v=n(77938),S=n(72237),O=n(64159);const T=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(T(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),i=e.substring(0,e.indexOf("/*."));return o&&(i===`arn:aws:s3:::${t}`&&"arn:aws:s3:::*"!==e)}))};var w=n(70579);const y=(0,S.A)(s.lazy((()=>n.e(7774).then(n.bind(n,97774))))),E=_.Ay.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",[`@media (max-width: ${h.nmC.lg}px)`]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),I=e=>{let{bucketName:t,internalPaths:n,hidePathButton:a,additionalOptions:c}=e;const u=(0,l.jL)(),m=(0,i.Zp)(),x=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),p=(0,o.d4)((e=>e.objectBrowser.versionsMode)),b=(0,o.d4)((e=>e.objectBrowser.versionedFile)),_=(0,o.d4)((e=>e.system.anonymousMode)),[S,T]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),N=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],k=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{}));let B=n;""!==n&&(B=`/${n}`);const V=B.split("/").filter((e=>""!==e)),F=V.length-1,L=t+B||t,D=C(k,L,N);(0,s.useEffect)((()=>{A(!1),Object.keys(k).forEach((e=>{e.includes(L)&&e.includes("/*")&&A(!0)}))}),[L,n,k]);const P=(0,v._)([L,...D],N)||_||I;let U=V.map(((e,n)=>{const o=`${V.slice(0,n+1).join("/")}/`,i=`/browser/${encodeURIComponent(t)}/${o?`${encodeURIComponent(o)}`:""}`;return n===F&&e===b?null:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===F?(0,w.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,j.Tw)(e)}):(0,w.jsx)(f.N_,{style:{whiteSpace:"pre"},to:i,onClick:()=>{u((0,d.cQ)({status:!1,objectName:""}))},children:(0,j.Tw)(e)})]},`breadcrumbs-${n.toString()}`)})),$=[];p&&($=[(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),b," - Versions"]})},"breadcrumbs-versionedItem")]);const R=[(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(f.N_,{to:`/browser/${t}`,onClick:()=>{u((0,d.cQ)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...U,...$];return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)(E,{children:[S&&(0,w.jsx)(y,{modalOpen:S,bucketName:t,folderName:n,onClose:()=>{T(!1)},limitedSubPath:I&&!((0,v._)([L,...D],N)||_)}),(0,w.jsx)(h.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(p)u((0,d.cQ)({status:!1,objectName:""}));else{if(0===V.length)return void m("/browser");const e=V.slice(0,-1);m(`/browser/${t}${e.length>0?`/${encodeURIComponent(`${e.join("/")}/`)}`:""}`)}},additionalOptions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(g(),{text:`${t}/${V.join("/")}`,children:(0,w.jsx)(h.$nd,{id:"copy-path",icon:(0,w.jsx)(h.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{u((0,O.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,w.jsx)(h.azJ,{className:"additionalOptions",children:c})]}),children:R}),!a&&(0,w.jsx)(h.m_M,{tooltip:P?"Choose or create a new path":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,w.jsx)(h.$nd,{id:"new-path",onClick:()=>{T(!0)},disabled:!_&&(x||!P),icon:(0,w.jsx)(h.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,w.jsx)(h.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},[`@media (max-width: ${h.nmC.lg}px)`]:{display:"flex"}},children:c})]})};var A=n(93445);const N=e=>"Enabled"===e||"Suspended"===e;var k=n(37414),B=n(39947),V=n(81708),F=n(6681);const L=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:a,uploadFolderFunction:l,overrideStyles:d={}}=e;const[c,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),p=(0,o.d4)((e=>e.system.anonymousMode)),j=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),b=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],g=C(j,t,b),_=Boolean(c),f=()=>{u(null)},S=(0,v._)([t,...g],b)||p,O=(0,v._)([n,...g],b,!1,!0),T=S||O;return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(F.A,{tooltip:T?"Upload Files":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,w.jsx)(h.$nd,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":_?"true":void 0,onClick:e=>{x(!m),u(e.currentTarget)},label:"Upload",icon:(0,w.jsx)(h.JMY,{}),variant:"callAction",disabled:i||!T,sx:d})}),(0,w.jsx)(h.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,w.jsx)(h.JMY,{}),value:"file",disabled:!S||i},{label:"Upload Folder",icon:(0,w.jsx)(h.nDF,{}),value:"folder",disabled:!O||i}],selectedOption:"",onSelect:e=>{"folder"!==e?a(f):l(f)},hideTriggerAction:()=>{x(!1)},open:m,anchorEl:c,anchorOrigin:"end",useAnchorWidth:!0})]})},D=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,w.jsxs)(h.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:`${t?"open":""} ${s}`,children:[(0,w.jsx)(h.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,w.jsx)(h._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var P=n(48245);const U=e=>{let{icon:t,strings:n}=e;return(0,w.jsxs)(h.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,w.jsx)("span",{className:"fileNameText",children:(0,j.qf)(n[n.length-1])})]})},$=[{icon:(0,w.jsx)(h.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,w.jsx)(h.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,w.jsx)(h.yTC,{}),extensions:["pdf"]},{icon:(0,w.jsx)(h.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,w.jsx)(h.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,w.jsx)(h.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,w.jsx)(h.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,w.jsx)(h.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,w.jsx)(h.ITz,{}),extensions:["sql"]},{icon:(0,w.jsx)(h.PcO,{}),extensions:["ttf","otf"]},{icon:(0,w.jsx)(h.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,w.jsx)(h.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,w.jsx)(h.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,w.jsx)(h.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],R=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,w.jsx)(h.KlI,{});e.endsWith("/")&&(s=(0,w.jsx)(h.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const a of $)for(const e of a.extensions)o.endsWith(`.${e}`)&&(s=a.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,w.jsx)(h.YJK,{}));const i=n.split("/");return t?s:(0,w.jsx)(U,{icon:s,strings:i})};var z=n(37524);const G=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,w.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(j.Tw).join(", "):(0,j.Tw)(e))(t[e]);return(0,w.jsxs)(h.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,w.jsx)("strong",{children:e}),(0,w.jsx)("br",{}),s]},`box-meta-${e}-${n.toString()}`)}))})};var J=n(30718),M=n(85330),K=n(77403);const W=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],H=Array.from(Array(31),((e,t)=>({value:(t+1).toString(),label:(t+1).toString()}))),Y=(new Date).getFullYear(),Z=Array.from(Array(50),((e,t)=>({value:(t+Y).toString(),label:(t+Y).toString()})));var q=n(94141);const Q=(0,s.forwardRef)(((e,t)=>{let{id:n,label:o,disableOptions:i=!1,tooltip:a="",borderBottom:l=!1,onDateChange:r,value:d=""}=e;(0,s.useImperativeHandle)(t,(()=>({resetDate:b})));const[c,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[p,j]=(0,s.useState)("");(0,s.useEffect)((()=>{if(""!==d){const e=d.split("-");j(e[0]),u(e[1]),x(`${parseInt(e[2])}`)}}),[d]),(0,s.useEffect)((()=>{const[e,t]=((e,t,n)=>{const s=Date.parse(`${e}-${t}-${n}`);if(isNaN(s))return[!1,""];const o=parseInt(t),i=parseInt(n),a=`${e}-${o<10?`0${o}`:o}-${i<10?`0${i}`:i}`;return[new Date(s).toISOString().split("T")[0]===a,a]})(p,c,m);r(t,e)}),[c,m,p,r]);const b=()=>{u(""),x(""),j("")},g=()=>i||!1,_=[{value:"",label:"<Month>"},...W],f=[{value:"",label:"<Day>"},...H],v=[{value:"",label:"<Year>"},...Z];return(0,w.jsxs)(h.azJ,{className:"inputItem",children:[(0,w.jsx)(h.azJ,{sx:{display:"flex",alignItems:"center",gap:5,marginBottom:5},children:(0,w.jsxs)(h.l1Y,{htmlFor:n,children:[(0,w.jsx)("span",{children:o}),""!==a&&(0,w.jsx)(h.azJ,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,w.jsx)(h.m_M,{tooltip:a,placement:"top",children:(0,w.jsx)(h.azJ,{sx:{"& .min-icon":{width:13}},children:(0,w.jsx)(h.NTw,{})})})})]})}),(0,w.jsxs)(h.azJ,{sx:{display:"flex",gap:12},children:[(0,w.jsx)(h.l6P,{id:`${n}-month`,name:`${n}-month`,value:c,onChange:e=>{u(e)},options:_,label:"",disabled:g()}),(0,w.jsx)(h.l6P,{id:`${n}-day`,name:`${n}-day`,value:m,onChange:e=>{x(e)},options:f,label:"",disabled:g()}),(0,w.jsx)(h.l6P,{id:`${n}-year`,name:`${n}-year`,value:p,onChange:e=>{j(e)},options:v,label:"",disabled:g(),sx:{marginBottom:12}})]})]})})),X=e=>{let{open:t,closeModalAndRefresh:n,objectName:i,objectInfo:r,bucketName:d}=e;const c=(0,l.jL)(),u=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),[x,p]=(0,s.useState)(!0),[j,b]=(0,s.useState)(""),[g,_]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1),[C,y]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(r.retention_mode&&(b((null===u||void 0===u?void 0:u.mode)||M.BT.Governance),y(!0)),r.retention_until_date){const t=new Date(r.retention_until_date);if("Invalid Date"!==t.toString()){const n=t.getFullYear(),s=(e=t.getMonth()+1)<10?`0${e}`:`${e}`,o=t.getDate();isNaN(o)||"NaN"===s||isNaN(n)||_(`${n}-${s}-${o}`)}y(!0)}var e}),[r,null===u||void 0===u?void 0:u.mode]);const E=(0,s.useRef)(null),I=()=>{p(!1),b(M.BT.Governance),E.current&&E.current.resetDate()},A=C&&("governance"===j||""===j);return(0,w.jsx)(q.A,{title:"Set Retention Policy",modalOpen:t,onClose:()=>{I(),n(!1)},children:(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:(0,w.jsxs)(h.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,w.jsxs)(h.azJ,{className:"inputItem",children:[(0,w.jsx)("strong",{children:"Selected Object"}),": ",i]}),A&&(0,w.jsx)(h.dOG,{value:"status",id:"status",name:"status",checked:x,onChange:e=>{p(!x)},label:"Status",indicatorLabels:["Enabled","Disabled"]}),(0,w.jsx)(h.z6M,{currentValue:j,id:"type",name:"type",label:"Type",disableOptions:!x||C&&""!==j,onChange:e=>{b(e.target.value)},selectorOptions:[{label:"Governance",value:M.BT.Governance},{label:"Compliance",value:M.BT.Compliance}]}),(0,w.jsx)(Q,{id:"date",label:"Date",disableOptions:!(x&&("governance"===j||"compliance"===j)),ref:E,value:g,borderBottom:!0,onDateChange:(e,t)=>{v(t),t&&_(e)}}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"reset",type:"button",variant:"regular",onClick:I,label:"Reset"}),(0,w.jsx)(h.$nd,{id:"save",type:"submit",variant:"callAction",disabled:x&&""===j||x&&!f||S,onClick:()=>{T(!0);const e=r.name||"",t=r.version_id||null;x||"governance"!==j?((e,t,s)=>{a.F.buckets.putObjectRetention(d,{prefix:e,version_id:t||""},{expires:s,mode:j}).then((()=>{T(!1),n(!0)})).catch((e=>{c((0,O.Dy)((0,m.S)(e.error))),T(!1)}))})(e,t,x||"governance"!==j?`${g}T23:59:59Z`:""):((e,t)=>{a.F.buckets.deleteObjectRetention(d,{prefix:e,version_id:t||""}).then((()=>{T(!1),n(!0)})).catch((e=>{c((0,O.Dy)((0,m.S)(e.error))),T(!1)}))})(e,t)},label:"Save"})]})]})})})};var ee=n(58661),te=n(25448);const ne=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:a,versioningInfo:d,selectedVersion:c=""}=e;const u=(0,l.jL)(),[m,x]=(0,te.A)((()=>t(!0)),(e=>{u((0,O.C9)(e)),"Access Denied."===e.detailedError&&t(!0)})),[p,j]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),_=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),f=(0,v._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===_||void 0===_?void 0:_.mode);if(!a)return null;return(0,w.jsx)(ee.A,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(h.xWY,{}),isLoading:m,onConfirm:()=>{const e=a.endsWith("/");x("DELETE",`/api/v1/buckets/${encodeURIComponent(i)}/objects?prefix=${encodeURIComponent(a)}${""!==c?`&version_id=${encodeURIComponent(c)}`:`&recursive=${e}&all_versions=${p}`}${b?"&bypass=true":""}`)},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:a})," ",""!==c?(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),"Version ID:",(0,w.jsx)("br",{}),(0,w.jsx)("strong",{children:c})]}):"","? ",(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),N(null===d||void 0===d?void 0:d.status)&&""===c&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(h.dOG,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:p,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{j(!p)},description:""})}),f&&(p||""!==c)&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(h.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!b)},description:""})})}),p&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,w.jsx)("br",{}),"This action is irreversible."]}),(0,w.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},se=e=>{let{open:t,closeModalAndRefresh:n,objectName:o,bucketName:i,actualInfo:r}=e;const d=(0,l.jL)(),[c,x]=(0,s.useState)(!1),[p,j]=(0,s.useState)(!1),b=r.version_id;(0,s.useEffect)((()=>{const e=u()(r,"legal_hold_status","OFF");x("ON"===e)}),[r]);const g=()=>{x(!1)};return(0,w.jsx)(q.A,{title:"Set Legal Hold",modalOpen:t,onClose:()=>{g(),n(!1)},children:(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),j(!0),a.F.buckets.putObjectLegalHold(i,{prefix:o,version_id:b||""},{status:c?M.SW.Enabled:M.SW.Disabled}).then((()=>{j(!1),n(!0)})).catch((e=>{d((0,O.Dy)((0,m.S)(e.error))),j(!1)}))})(e)},children:(0,w.jsxs)(h.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,w.jsxs)(h.azJ,{className:"inputItem",children:[(0,w.jsx)("strong",{children:"Object"}),": ",i+"/"+o]}),(0,w.jsx)(h.dOG,{value:"legalhold",id:"legalhold",name:"legalhold",checked:c,onChange:e=>{x(!c)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"clear",type:"button",variant:"regular",onClick:g,label:"Clear"}),(0,w.jsx)(h.$nd,{id:"save",type:"submit",variant:"callAction",disabled:p,label:" Save"})]})]})})})},oe=_.Ay.b((e=>{let{theme:t}=e;return{color:u()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),ie=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:d,actualInfo:c}=e;const x=(0,l.jL)(),p=(0,o.d4)(O.Rq),[j,b]=(0,s.useState)(""),[g,_]=(0,s.useState)(""),[f,S]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[y,E]=(0,s.useState)(""),[I,A]=(0,s.useState)(""),N=c.tags,k=Object.keys(N||{}),B=null===(t=c.name)||void 0===t?void 0:t.split("/"),V=(null===B||void 0===B?void 0:B.pop())||"",F=e=>(0,w.jsxs)(h.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,w.jsx)("strong",{children:V})]});return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(q.A,{modalOpen:n,title:T?"Delete Tag":"Edit Tags",onClose:()=>{i(!0)},iconColor:T?"delete":"default",titleIcon:T?(0,w.jsx)(h.aaC,{}):(0,w.jsx)(h.cGQ,{}),children:T?(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)(h.xA9,{container:!0,children:[F(!1),"Are you sure you want to delete the tag"," ",(0,w.jsxs)(oe,{children:[y," : ",I]})," ","?",(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{E(""),A(""),C(!1)},label:"Cancel"}),(0,w.jsx)(h.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e={...N};delete e[y];const t=p?c.version_id||"":"null";a.F.buckets.putObjectTags(d,{prefix:c.name||"",version_id:t},{tags:e}).then((()=>{i(!0),S(!1)})).catch((e=>{x((0,O.Dy)((0,m.S)(e.error))),S(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,w.jsxs)(h.azJ,{children:[(0,w.jsx)(v.R,{scopes:[r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS],resource:d,children:(0,w.jsxs)(h.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[F(!0),(0,w.jsxs)(h.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,w.jsx)("br",{}),0===k.length?(0,w.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,w.jsx)(s.Fragment,{}),(0,w.jsx)(h.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:k.map(((e,t)=>{const n=u()(N,`${e}`,"");return""!==n?(0,w.jsx)(v.R,{scopes:[r.OV.S3_DELETE_OBJECT_TAGGING,r.OV.S3_DELETE_ACTIONS],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,w.jsx)(h.vwO,{id:`${e} : ${n}`,label:`${e} : ${n}`,variant:"regular",color:"default",onDelete:()=>{((e,t)=>{E(e),A(t),C(!0)})(e,n)}})},`chip-${t}`):null}))})]})]})}),(0,w.jsx)(v.R,{scopes:[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,w.jsxs)(h.azJ,{children:[(0,w.jsx)(h._xt,{icon:(0,w.jsx)(h.b_$,{}),separator:!1,children:"Add New Tag"}),(0,w.jsxs)(h.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,w.jsx)(h.cl_,{value:j,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{b(e.target.value)}}),(0,w.jsx)(h.cl_,{value:g,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{_(e.target.value)}}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{_(""),b("")},label:"Clear"}),(0,w.jsx)(h.$nd,{type:"submit",variant:"callAction",disabled:""===g.trim()||""===j.trim()||f,onClick:()=>{S(!0);const e={};e[j]=g;const t={...N,...e},n=p?c.version_id||"":"null";a.F.buckets.putObjectTags(d,{prefix:c.name||"",version_id:n},{tags:t}).then((()=>{i(!0),S(!1)})).catch((e=>{x((0,O.Dy)((0,m.S)(e.error))),S(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})},ae=e=>{let{value:t}=e;const[n,o]=(0,s.useState)(!1);return(0,w.jsxs)(h.azJ,{sx:{display:"flex",alignItems:"center",flexFlow:"row",[`@media (max-width: ${h.nmC.sm}px)`]:{flexFlow:"column"}},children:[(0,w.jsx)(h.cl_,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:n?"text":"password",onChange:()=>{},value:t,overlayIcon:(0,w.jsx)(h.TdU,{}),readOnly:!0,overlayAction:()=>navigator.clipboard.writeText(t)}),(0,w.jsx)(h.$nd,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:()=>o(!n),label:"Show/Hide"})]})},le=e=>{let{closeInspectModalAndRefresh:t,inspectOpen:n,inspectPath:o,volumeName:i}=e;const a=(0,l.jL)(),r=()=>t(!1),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(""),[x,p]=(0,s.useState)("");if(!o)return null;return(0,w.jsxs)(s.Fragment,{children:[!u&&(0,w.jsx)(q.A,{modalOpen:n,titleIcon:(0,w.jsx)(h.nTF,{}),title:"Inspect Object",onClose:r,children:(0,w.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:["Would you like to encrypt ",(0,w.jsx)("b",{children:o}),"? ",(0,w.jsx)("br",{}),(0,w.jsx)(h.dOG,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:d,value:"encrypt",id:"encrypt",name:"encrypt",onChange:e=>{c(!d)},description:""}),(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:(0,w.jsx)(h.$nd,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:async()=>{let e=document.baseURI.replace(window.location.origin,"");(async e=>await fetch(e,{method:"GET"}))(`${window.location.origin}${e}/api/v1/admin/inspect?volume=${encodeURIComponent(i)}&file=${encodeURIComponent(o+"/xl.meta")}&encrypt=${d}`).then((async e=>{if(!e.ok){const t=await e.json();a((0,O.C9)({errorMessage:t.message,detailedError:t.code}))}const t=await e.blob(),n=e.headers.get("content-disposition").split('"')[1],s=(0,j.UM)(n)||"";(0,j.OT)(t,n),p(n),""!==s?m(s):r()})).catch((e=>{a((0,O.C9)(e))}))},label:"Inspect"})})]})}),u?(0,w.jsxs)(q.A,{modalOpen:n,title:"Inspect Decryption Key",onClose:()=>{(0,j.Yj)(x),r(),m("")},titleIcon:(0,w.jsx)(h.aJN,{}),children:[(0,w.jsxs)(h.azJ,{children:["This will be displayed only once. It cannot be recovered.",(0,w.jsx)("br",{}),"Use secure medium to share this key."]}),(0,w.jsx)(h.azJ,{children:(0,w.jsx)(ae,{value:u})})]}):null]})},re=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:a,bucketName:r}=e;const d=(0,l.jL)(),[c,u]=(0,s.useState)(o),[m,x]=(0,s.useState)(!1);return(0,w.jsxs)(q.A,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,w.jsx)(h.qUP,{}),children:[(0,w.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,w.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,w.jsx)("br",{}),(0,w.jsx)("br",{})," We recommend to rename the file download"]}),(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,P._)(d,r,i,a),n()})(e)},children:(0,w.jsxs)(h.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,w.jsx)(h.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{u(e.target.value)},label:"",type:"text",value:c,error:c.length>200&&!m?"Filename should be less than 200 characters long.":""}),(0,w.jsx)(h.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:m,onChange:e=>{x(e.target.checked),e.target.checked&&u(o)},label:"Use Original Name"}),(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:(0,w.jsx)(h.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:c.length>200&&!m,label:"Download File"})})]})})]})},de=e=>{var t,n;let{modalOpen:i,onCloseAndUpdate:d,bucketName:c,actualInfo:u}=e;const x=(0,l.jL)();(0,o.d4)(O.Rq);let p=[];u&&u.name&&(p=u.name.split("/"));const j=p.length>0?p[p.length-1]:u.name,b=(null===(t=u.name)||void 0===t?void 0:t.replace(j,""))||"",[g,_]=(0,s.useState)(j||""),[f,S]=(0,s.useState)(!1),T=null===(n=u.name)||void 0===n?void 0:n.split("/"),C=(null===T||void 0===T?void 0:T.pop())||"";return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(q.A,{modalOpen:i,title:"Rename Object",onClose:()=>{d(!0)},iconColor:"default",titleIcon:(0,w.jsx)(h.qUP,{}),children:(0,w.jsxs)(h.azJ,{children:[(0,w.jsx)(v.R,{scopes:[r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS],resource:c,children:(0,w.jsx)(h.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:(0,w.jsxs)(h.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Rename for: ",(0,w.jsx)("strong",{children:C})]})})}),(0,w.jsx)(v.R,{scopes:[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS],resource:c,errorProps:{disabled:!0,onClick:null},children:(0,w.jsx)(h.azJ,{children:(0,w.jsxs)(h.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,w.jsx)(h.cl_,{value:g,label:"New name",id:"newName",name:"newName",placeholder:"Enter new name",onChange:e=>{_(e.target.value)}}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{_(j||"")},label:"Clear"}),(0,w.jsx)(h.$nd,{type:"submit",variant:"callAction",disabled:""===g.trim()||g.trim()===j||f,onClick:()=>{S(!0),console.log(`objectPath   : ${b}`),console.log(`objectNameArray   : ${p}`),console.log(`objectName   : ${j}`),console.log(`source: ${c}/${u.name}`),console.log(`target: ${c}/${b}${g}`),a.F.buckets.objectsCopyObjectUpdate(c,{source:j,target_bucket:c,target:`${b}${g}`}).then((()=>a.F.buckets.deleteObject(c,{prefix:j}))).then((()=>{d(!0),S(!1)})).catch((e=>{x((0,O.Dy)((0,m.S)(e.error))),S(!1)}))},id:"rename",label:"Save"})]})]})})})]})})})},ce=e=>{var t,n;let{modalOpen:o,onCloseAndUpdate:i,bucketName:d,actualInfo:c}=e;const u=(0,l.jL)();let x=[];c&&c.name&&(x=c.name.split("/"));const p=x.length>0?x[x.length-1]:c.name,j=(null===(t=c.name)||void 0===t?void 0:t.replace(p,""))||"",[b,g]=(0,s.useState)(p||""),[_,f]=(0,s.useState)(!1),S=null===(n=c.name)||void 0===n?void 0:n.split("/"),T=(null===S||void 0===S?void 0:S.pop())||"";return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(q.A,{modalOpen:o,title:"Copy Object",onClose:()=>{i(!0)},iconColor:"default",titleIcon:(0,w.jsx)(h.TdU,{}),children:(0,w.jsxs)(h.azJ,{children:[(0,w.jsx)(v.R,{scopes:[r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS],resource:d,children:(0,w.jsx)(h.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:(0,w.jsxs)(h.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Copy for: ",(0,w.jsx)("strong",{children:T})]})})}),(0,w.jsx)(v.R,{scopes:[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,w.jsx)(h.azJ,{children:(0,w.jsxs)(h.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,w.jsx)(h.cl_,{value:b,label:"New name",id:"newName",name:"newName",placeholder:"Enter new name",onChange:e=>{g(e.target.value)}}),(0,w.jsx)(h.Sc0,{id:"copyVersion",disabled:!1,color:"primary",label:"Copy version"}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,w.jsx)(h.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{g(p||"")},label:"Clear"}),(0,w.jsx)(h.$nd,{type:"submit",variant:"callAction",disabled:""===b.trim()||b.trim()===p||_,onClick:()=>{f(!0),a.F.buckets.objectsCopyObjectUpdate(d,{source:p,target_bucket:d,target:`${j}${b}`}).then((()=>{i(!0),f(!1)})).catch((e=>{u((0,O.Dy)((0,m.S)(e.error))),f(!1)}))},id:"copy",label:"Save"})]})]})})})]})})})},ue={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},he=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,locking:c,onClosePanel:m}=e;const x=(0,l.jL)(),p=(0,o.d4)(O.Rq),b=(0,o.d4)((e=>e.objectBrowser.versionsMode)),g=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),_=(0,o.d4)((e=>e.objectBrowser.loadingObjectInfo)),[f,S]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[y,E]=(0,s.useState)(!1),[I,N]=(0,s.useState)(!1),[k,B]=(0,s.useState)(!1),[V,L]=(0,s.useState)(!1),[D,U]=(0,s.useState)(!1),[$,M]=(0,s.useState)(null),[K,W]=(0,s.useState)([]),[H,Y]=(0,s.useState)(null),[Z,q]=(0,s.useState)([]),[Q,ee]=(0,s.useState)(!1),[te,oe]=(0,s.useState)(!1),[ae,he]=(0,s.useState)(0),[me,xe]=(0,s.useState)(!1),[pe,je]=(0,s.useState)(null),[be,ge]=(0,s.useState)(!1),_e=(t||"").split("/").pop()||"";let fe=[];$&&$.name&&(fe=$.name.split("/")),(0,s.useEffect)((()=>{if(p&&K&&K.length>=1){let e=K.find((e=>e.is_latest))||ue;""!==g&&(e=K.find((e=>e.version_id===g))||ue),e.is_delete_marker||ge(!0),M(e)}}),[g,p,K]),(0,s.useEffect)((()=>{_&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:p}).then((e=>{const t=e.data.objects||[];if(p){W(t),q(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);he(e)}else{const e=t[0];M(e),q([]),e.is_delete_marker||ge(!0)}x((0,d.oe)(!1))})).catch((e=>{console.error("Error loading object details",e.error),x((0,d.oe)(!1))}))}),[_,n,t,x,p,g]),(0,s.useEffect)((()=>{be&&""!==t&&a.F.buckets.getObjectMetadata(n,{prefix:t,versionID:(null===$||void 0===$?void 0:$.version_id)||""}).then((e=>{let t=u()(e.data,"objectMetadata",{});je(t),ge(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),ge(!1)}))}),[n,t,be,null===$||void 0===$?void 0:$.version_id]);let ve=[];$&&$.tags&&(ve=Object.keys($.tags));const Se=(0,w.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,w.jsx)(h.aHM,{})});if(!$)return _?Se:null;const Oe=fe.length>0?fe[fe.length-1]:$.name,Te=[n,_e,[n,$.name].join("/")],Ce=(0,v._)(n,[r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS]),we=(0,v._)(Te,[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS]),ye=(0,v._)(Te,[r.OV.S3_PUT_OBJECT,r.OV.S3_GET_OBJECT,r.OV.S3_DELETE_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS,r.OV.S3_DELETE_ACTIONS]),Ee=(0,v._)(Te,[r.OV.S3_PUT_OBJECT,r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),Ie=(0,v._)(Te,[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],!0),Ae=(0,v._)(Te,[r.OV.ADMIN_INSPECT_DATA]),Ne=(0,v._)(Te,[r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),ke=(0,v._)(Te,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Be=(0,v._)([n,_e,[n,$.name].join("/")],[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS]);let Ve=(0,A.IZ)(pe,_e);const Fe=[{action:()=>{(0,P._)(x,n,t,$)},label:"Download",disabled:!!$.is_delete_marker||!ke,icon:(0,w.jsx)(h.s3U,{}),tooltip:ke?"Download this Object":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{S(!0)},label:"Share",disabled:!!$.is_delete_marker||!ke,icon:(0,w.jsx)(h.liv,{}),tooltip:ke?"Share this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{oe(!0)},label:"Preview",disabled:!!$.is_delete_marker||"none"===Ve&&!ke,icon:(0,w.jsx)(h.cyn,{}),tooltip:ke?"Preview this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{L(!0)},label:"Legal Hold",disabled:!c||!p||!!$.is_delete_marker||!Ce||""!==g,icon:(0,w.jsx)(h.ODz,{}),tooltip:Ce?c?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,r.vj)([r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:()=>{C(!0)},label:"Retention",disabled:!p||!!$.is_delete_marker||!Ie||""!==g||!c,icon:(0,w.jsx)(h.gn6,{}),tooltip:Ie?c?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,r.vj)([r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:()=>{E(!0)},label:"Tags",disabled:!!$.is_delete_marker||""!==g||!we,icon:(0,w.jsx)(h.P3Z,{}),tooltip:we?"Change Tags for this File":(0,r.vj)([r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{N(!0)},label:"Rename",disabled:!!$.is_delete_marker||""!==g||!ye,icon:(0,w.jsx)(h.qUP,{}),tooltip:ye?"rename this File":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_GET_OBJECT,r.OV.S3_DELETE_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS,r.OV.S3_DELETE_ACTIONS],"Rename this object")},{action:()=>{B(!0)},label:"Copy",disabled:!!$.is_delete_marker||""!==g||!Ee,icon:(0,w.jsx)(h.TdU,{}),tooltip:Ee?"copy this File":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"copy this object")},{action:()=>{U(!0)},label:"Inspect",disabled:!p||!!$.is_delete_marker||""!==g||!Ae,icon:(0,w.jsx)(h.nTF,{}),tooltip:Ae?"Inspect this file":(0,r.vj)([r.OV.ADMIN_INSPECT_DATA],"inspect this file")},{action:()=>{x((0,d.cQ)({status:!b,objectName:Oe}))},label:b?"Hide Object Versions":"Display Object Versions",icon:(0,w.jsx)(h.j1U,{}),disabled:!p||!($.version_id&&"null"!==$.version_id)||!Ne,tooltip:Ne?$.version_id&&"null"!==$.version_id?"Display Versions for this file":"":(0,r.vj)([r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,w.jsxs)(s.Fragment,{children:[f&&$&&(0,w.jsx)(J.default,{open:f,closeModalAndRefresh:()=>{Y(null),S(!1)},bucketName:n,dataObject:H||$}),T&&$&&(0,w.jsx)(X,{open:T,closeModalAndRefresh:e=>{C(!1),e&&x((0,d.oe)(!0))},objectName:_e,objectInfo:$,bucketName:n}),Q&&(0,w.jsx)(ne,{deleteOpen:Q,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{ee(!1),e&&""===g?m(!0):(x((0,d.SK)(!0)),x((0,d.Ai)("")),x((0,d.oe)(!0)))},versioningInfo:p?i:void 0,selectedVersion:g}),V&&$&&(0,w.jsx)(se,{open:V,closeModalAndRefresh:e=>{L(!1),e&&x((0,d.oe)(!0))},objectName:$.name||"",bucketName:n,actualInfo:$}),te&&$&&(0,w.jsx)(z.default,{open:te,bucketName:n,actualInfo:$,onClosePreview:()=>{oe(!1)}}),y&&$&&(0,w.jsx)(ie,{modalOpen:y,bucketName:n,actualInfo:$,onCloseAndUpdate:e=>{E(!1),e&&x((0,d.oe)(!0))}}),I&&$&&(0,w.jsx)(de,{modalOpen:I,bucketName:n,actualInfo:$,onCloseAndUpdate:e=>{N(!1),e&&x((0,d.oe)(!0))}}),k&&$&&(0,w.jsx)(ce,{modalOpen:k,bucketName:n,actualInfo:$,onCloseAndUpdate:e=>{B(!1),e&&x((0,d.oe)(!0))}}),D&&$&&(0,w.jsx)(le,{inspectOpen:D,volumeName:n,inspectPath:$.name||"",closeInspectModalAndRefresh:e=>{U(!1),e&&x((0,d.oe)(!0))}}),me&&$&&(0,w.jsx)(re,{open:me,closeModal:()=>{xe(!1)},currentItem:_e,bucketName:n,internalPaths:t,actualInfo:$}),_?(0,w.jsx)(s.Fragment,{children:Se}):(0,w.jsxs)(h.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,w.jsx)(h.Smc,{title:(0,w.jsxs)("div",{className:"ObjectDetailsTitle",children:[R(Oe||"",!0),(0,w.jsx)("span",{className:"objectNameContainer",children:Oe})]}),items:Fe}),(0,w.jsx)(F.A,{tooltip:Be?"":(0,r.vj)([r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],"delete this object"),children:(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,w.jsx)(v.R,{resource:[n,_e,[n,$.name].join("/")],scopes:[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],errorProps:{disabled:!0},children:(0,w.jsx)(h.$nd,{id:"delete-element-click",icon:(0,w.jsx)(h.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{ee(!0)},disabled:""===g&&$.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete"+(""!==g?" version":"")})})})}),(0,w.jsx)(h.kCK,{icon:(0,w.jsx)(h.Hch,{}),label:"Object Info"}),(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Name:"}),(0,w.jsx)("br",{}),(0,w.jsx)("div",{style:{overflowWrap:"break-word"},children:Oe})]}),""!==g&&(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Version ID:"}),(0,w.jsx)("br",{}),g]}),(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Size:"}),(0,w.jsx)("br",{}),(0,j.nO)(`${$.size||"0"}`)]}),$.version_id&&"null"!==$.version_id&&""===g&&(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Versions:"}),(0,w.jsx)("br",{}),Z.length," version",1!==Z.length?"s":"",","," ",(0,j.qO)(ae)]}),""===g&&(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Last Modified:"}),(0,w.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,j.eQ)(s,"ms");return""!==o.trim()?`${o} ago`:"Just now"})($.last_modified||"")]}),(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"ETAG:"}),(0,w.jsx)("br",{}),$.etag||"N/A"]}),(0,w.jsxs)(h.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Tags:"}),(0,w.jsx)("br",{}),0===ve.length?"N/A":ve.map(((e,t)=>(0,w.jsxs)("span",{children:[e,":",u()($,`tags.${e}`,""),t<ve.length-1?", ":""]},`key-vs-${t.toString()}`)))]}),(0,w.jsx)(h.azJ,{className:"detailContainer",children:(0,w.jsx)(v.R,{scopes:[r.OV.S3_GET_OBJECT_LEGAL_HOLD,r.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:"Legal Hold:"}),(0,w.jsx)("br",{}),$.legal_hold_status?"On":"Off"]})})}),(0,w.jsx)(h.azJ,{className:"detailContainer",children:(0,w.jsx)(v.R,{scopes:[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:"Retention Policy:"}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{className:"capitalizeFirst",children:($.version_id&&$.version_id,(0,w.jsx)(s.Fragment,{children:$.retention_mode?$.retention_mode.toLowerCase():"None"}))})]})})}),!$.is_delete_marker&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(h.kCK,{label:"Metadata",icon:(0,w.jsx)(h.$vN,{})}),(0,w.jsx)(h.azJ,{className:"detailContainer",children:$&&pe?(0,w.jsx)(G,{metaData:pe}):null})]})]})]})},me=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:r}=e;const c=(0,l.jL)(),[u,x]=(0,s.useState)(!1);return(0,w.jsx)(ee.A,{title:"Restore File Version",confirmText:"Restore",isOpen:i,isLoading:u,titleIcon:(0,w.jsx)(h.YkU,{}),onConfirm:()=>{x(!0),a.F.buckets.putObjectRestore(n,{prefix:o,version_id:t.version_id||""}).then((()=>{x(!1),r(!0),c((0,d.NV)({prefix:o,objectInfo:t}))})).catch((e=>{c((0,O.C9)((0,m.S)(e.error))),x(!1)}))},confirmButtonProps:{variant:"secondary",disabled:u},onClose:()=>{r(!1)},confirmationContent:(0,w.jsxs)(h.azJ,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:o})," ",(0,w.jsx)("br",{})," with Version ID:",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:t.version_id}),"?"]})})},xe=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,w.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},pe=_.Ay.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:u()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:`${u()(t,"borderColor","#F8F8F8")} 1px solid`,padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:u()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),je=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:a,onShare:l,onDownload:r,onRestore:d,onPreview:c,globalClick:u,index:m,key:x,style:b}=e;const g=n.is_delete_marker,_=[{icon:(0,w.jsx)(h.cyn,{}),action:c,tooltip:"Preview"},{icon:(0,w.jsx)(h.s3U,{}),action:r,tooltip:"Download this version"},{icon:(0,w.jsx)(h.liv,{}),action:l,tooltip:"Share this version"},{icon:(0,w.jsx)(h.YkU,{}),action:d,tooltip:"Restore this version"}];let f=null;n.is_delete_marker?f="deleted":n.is_latest?f="current":"null"===n.version_id&&(f="null");let v=p.c9.now();return n.last_modified&&(v=p.c9.fromISO(n.last_modified)),(0,w.jsx)(pe,{children:(0,w.jsx)(h.xA9,{container:!0,className:"ctrItem",onClick:()=>{u(n)},style:b,children:(0,w.jsx)(h.xA9,{item:!0,xs:12,className:"intermediateLayer "+(s?"selected":""),children:(0,w.jsxs)(h.xA9,{item:!0,xs:!0,className:"mainFileVersionItem "+(n.is_delete_marker?"deleted":""),children:[(0,w.jsx)(h.xA9,{item:!0,xs:12,children:(0,w.jsxs)(h.xA9,{container:!0,children:[(0,w.jsxs)(h.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,w.jsx)(h.Sc0,{checked:i,id:`select-${n.version_id}`,name:`select-${n.version_id}`,onChange:e=>{e.stopPropagation(),a(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),R(t,!0)," v",m.toString(),(0,w.jsx)("span",{className:"versionItem",children:f&&(0,w.jsx)(xe,{type:f})})]}),(0,w.jsx)(h.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:_.map(((e,t)=>(0,w.jsx)(h.m_M,{tooltip:e.tooltip,children:(0,w.jsx)(h.K0,{size:"small",id:`version-action-${e.tooltip}-${t.toString()}`,className:"spacing "+(g?"buttonDisabled":""),disabled:g,onClick:t=>{t.stopPropagation(),g?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},`version-action-${e.tooltip}-${t.toString()}`)))})]})}),(0,w.jsx)(h.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,w.jsxs)(h.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:"Last modified:"})," ",v.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:"Size:"})," ",(0,j.nO)(`${n.size||"0"}`)]})]})]})})},x)})},be=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:d}=e;const c=(0,l.jL)(),[u,x]=(0,s.useState)(!1),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),_=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),f=(0,v._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===_||void 0===_?void 0:_.mode);if((0,s.useEffect)((()=>{u&&a.F.buckets.deleteObject(i,{prefix:d,non_current_versions:!0,bypass:b}).then((()=>{t(!0)})).catch((e=>{c((0,O.C9)((0,m.S)(e.error))),x(!1)}))}),[u,t,c,d,i,b]),!d)return null;return(0,w.jsx)(ee.A,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(h.xWY,{}),isLoading:u,onConfirm:()=>{x(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==p||u},confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,w.jsx)("b",{children:d}),"? ",(0,w.jsx)("br",{}),f&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(h.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!b)},description:""})})}),(0,w.jsx)("br",{}),"To continue please type ",(0,w.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,w.jsx)(h.xA9,{item:!0,xs:12,children:(0,w.jsx)(h.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{j(e.target.value)},label:"",value:p})})]})})},ge=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:d,selectedObject:c}=e;const u=(0,l.jL)(),[x,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),_=(0,v._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===g||void 0===g?void 0:g.mode);return(0,s.useEffect)((()=>{if(x){const e=d.map((e=>({path:c,versionID:e,recursive:!1})));e.length>0&&a.F.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:j}).then((()=>{p(!1),t(!0)})).catch((e=>{u((0,O.C9)((0,m.S)(e.error))),p(!1)}))}}),[x,t,i,c,d,j,u]),d?(0,w.jsx)(ee.A,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(h.xWY,{}),isLoading:x,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",d.length," ","versions for ",(0,w.jsx)("strong",{children:c}),"?",_&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(h.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!j)},description:""})})})]})}):null};var _e=n(29198);const fe={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},ve=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,l.jL)(),r=(0,o.d4)((e=>e.objectBrowser.searchVersions)),c=(0,o.d4)((e=>e.objectBrowser.loadingVersions)),x=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),p=(0,o.d4)(O.Rq),[b,g]=(0,s.useState)(!1),[_,f]=(0,s.useState)(null),[v,S]=(0,s.useState)(null),[T,C]=(0,s.useState)([]),[y,E]=(0,s.useState)(!1),[A,N]=(0,s.useState)(null),[k,B]=(0,s.useState)("date"),[V,L]=(0,s.useState)(!1),[D,U]=(0,s.useState)(!1),[$,R]=(0,s.useState)(!1),[G,M]=(0,s.useState)([]),[K,W]=(0,s.useState)(!1);let H=[];_&&_.name&&(H=_.name.split("/")),(0,s.useEffect)((()=>{c||_||i((0,d.SK)(!0))}),[c,_,i]),(0,s.useEffect)((()=>{c&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:p}).then((e=>{const n=u()(e.data,"objects",[]).filter((e=>e.name===t));p?(f(n.find((e=>e.is_latest))||fe),C(n)):(f(n[0]),C([])),i((0,d.SK)(!1))})).catch((e=>{i((0,O.C9)((0,m.S)(e.error))),i((0,d.SK)(!1))}))}),[c,n,t,i,p]);const Y=e=>{S(e),g(!0)},Z=e=>{S(e),L(!0)},q=e=>{N(e),E(!0)},Q=e=>{(0,P._)(i,n,t,e)},X=e=>{i((0,d.Ai)(e.version_id||""))},ee=T.filter((e=>!!e.version_id&&e.version_id.includes(r))),te=T.reduce(((e,t)=>t.size?e+t.size:e),0);ee.sort(((e,t)=>{if("size"===k)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const ne=e=>{if(G.includes(e)){const t=G.filter((t=>t!==e));return void M(t)}const t=[...G];t.push(e),M(t)};return(0,w.jsxs)(s.Fragment,{children:[b&&_&&(0,w.jsx)(J.default,{open:b,closeModalAndRefresh:()=>{S(null),g(!1),L(!1)},bucketName:n,dataObject:v||_}),y&&_&&A&&(0,w.jsx)(me,{restoreOpen:y,bucketName:n,versionToRestore:A,objectPath:_.name||"",onCloseAndUpdate:e=>{E(!1),N(null),e&&(i((0,d.SK)(!0)),i((0,d.oe)(!0)))}}),V&&_&&(0,w.jsx)(z.default,{open:V,bucketName:n,actualInfo:{name:_.name||"",version_id:v&&v.version_id?v.version_id:"null",size:v&&v.size?v.size:0,content_type:"",last_modified:_.last_modified||""},onClosePreview:()=>{L(!1)}}),D&&(0,w.jsx)(be,{deleteOpen:D,closeDeleteModalAndRefresh:e=>{U(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)))},selectedBucket:n,selectedObject:t}),K&&(0,w.jsx)(ge,{selectedBucket:n,selectedObject:t,deleteOpen:K,selectedVersions:G,closeDeleteModalAndRefresh:e=>{W(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)),M([]))}}),(0,w.jsxs)(h.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!_&&(0,w.jsx)(h.xA9,{item:!0,xs:12,children:(0,w.jsx)(h.z21,{})}),_&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(h.xA9,{item:!0,xs:12,children:(0,w.jsx)(I,{bucketName:n,internalPaths:t,hidePathButton:!0})}),(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},[`@media (max-width: ${h.nmC.md}px)`]:{"&::before":{display:"none"}}},children:(0,w.jsx)(h.lcx,{icon:(0,w.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,w.jsx)(h.j1U,{style:{width:20,height:20}})}),title:`${H.length>0?H[H.length-1]:_.name} Versions`,subTitle:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsxs)("strong",{children:[T.length," Version",1===T.length?"":"s","\xa0\xa0\xa0"]})}),(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsx)("strong",{children:(0,j.qO)(te)})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(F.A,{tooltip:"Select Multiple Versions",children:(0,w.jsx)(h.$nd,{id:"select-multiple-versions",onClick:()=>{R(!$)},icon:(0,w.jsx)(h.IN,{}),variant:$?"callAction":"regular",style:{marginRight:8}})}),$&&(0,w.jsx)(F.A,{tooltip:"Delete Selected Versions",children:(0,w.jsx)(h.$nd,{id:"delete-multiple-versions",onClick:()=>{W(!0)},icon:(0,w.jsx)(h.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===G.length})}),(0,w.jsx)(F.A,{tooltip:"Delete Non Current Versions",children:(0,w.jsx)(h.$nd,{id:"delete-non-current",onClick:()=>{U(!0)},icon:(0,w.jsx)(h.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:T.length<=1})}),(0,w.jsx)(h.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:k,label:"Sort by",onChange:e=>{B(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",[`@media (max-width: ${h.nmC.md}px)`]:{height:600}},children:_.version_id&&"null"!==_.version_id&&(0,w.jsx)(_e.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:ee.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const a=T.length-n;return(0,w.jsx)(je,{style:i,fileName:(null===_||void 0===_?void 0:_.name)||"",versionInfo:ee[n],index:a,onDownload:Q,onRestore:q,onShare:Y,onPreview:Z,globalClick:X,isSelected:x===ee[n].version_id,checkable:$,onCheck:ne,isChecked:G.includes(ee[n].version_id||"")},t)}})})]})]})]})},Se=e=>{if(e.name.endsWith("/"))return"";const t=p.c9.now(),n=p.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?`Today, ${n.toFormat("HH:mm")}`:n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},Oe=e=>e.name.endsWith("/")||!e.size?"-":(0,j.nO)(String(e.size)),Te=[{label:"Name",elementKey:"name",renderFunction:R,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:Se,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Oe,renderFullObject:!0,width:100,enableSort:!0}],Ce=[{label:"Name",elementKey:"name",renderFunction:R,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:Se,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Oe,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var we=n(46537);const ye=()=>{const e=(0,l.jL)(),t=(0,i.g)(),n=(0,i.Zp)(),[a,c]=(0,s.useState)("ASC"),[m,x]=(0,s.useState)("name"),p=t.bucketName||"",j=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),b=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),g=(0,o.d4)(we.s$),_=!(null===g||void 0===g||!g.includes("object-browser-only")),f=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),S=(0,o.d4)((e=>e.objectBrowser.records)),O=(0,o.d4)((e=>e.objectBrowser.searchObjects)),T=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),C=(0,o.d4)((e=>e.objectBrowser.connectionError)),y=(0,o.d4)((e=>e.system.anonymousMode)),E=(0,v._)(p,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET]),I=S.filter((e=>{if(""===O)return!0;return e.name.toLowerCase().indexOf(O.toLowerCase())>=0})).sort((0,A.$w)(m));let N=[];N="ASC"===a?I:I.reverse();const k=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i=`/browser/${encodeURIComponent(p)}${o?`/${encodeURIComponent(o)}`:""}`;!y||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,d.KX)([])),n(i),y||(e((0,d.TO)(!0)),e((0,d.SK)(!0))),e((0,d.A7)(o))):(0,P._)(e,p,o,t)},sendOnlyId:!1}];let B=E||y?"This location is empty"+(f?"":", please try uploading a new file"):(0,r.vj)([r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");C&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let V="calc(100vh - 290px)";return _&&(V="calc(100vh - 315px)"),(0,w.jsx)(h.bQt,{itemActions:k,columns:f?Ce:Te,isLoading:b,entityName:"Objects",idField:"name",records:N,customPaperHeight:V,selectedItems:T,onSelect:y?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...T];return o?i.push(s):i=i.filter((e=>e!==s)),e((0,d.KX)(i)),e((0,d.A7)(null)),i},customEmptyMessage:B,sortEnabled:{currentSort:m,currentDirection:a,onSortClick:t=>{const n=u()(t,"sortDirection","DESC");x(t.sortBy),c(n),e((0,d.Yw)(!0))}},onSelectAll:()=>{if(e((0,d.A7)(null)),T.length===N.length)return void e((0,d.KX)([]));const t=N.map((e=>e.name));e((0,d.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=N[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:j?"100%":"initial"},noBackground:!0})};var Ee=n(64681);const Ie=()=>{const e=(0,l.jL)(),t=(0,o.d4)((e=>e.objectBrowser.searchObjects));return(0,w.jsx)(Ee.A,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,d.$X)(t))},value:t})};var Ae=n(30614);const Ne=(0,S.A)(s.lazy((()=>n.e(5941).then(n.bind(n,65941))))),ke=(0,S.A)(s.lazy((()=>Promise.resolve().then(n.bind(n,30718))))),Be=(0,S.A)(s.lazy((()=>n.e(2704).then(n.bind(n,32704))))),Ve=(0,S.A)(s.lazy((()=>Promise.resolve().then(n.bind(n,37524))))),Fe={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},Le={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},De={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Pe=()=>{var e;const t=(0,l.jL)(),n=(0,i.g)(),c=(0,i.Zp)(),b=(0,i.zy)(),g=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),_=(0,o.d4)((e=>e.objectBrowser.rewind.bucketToRewind)),f=(0,o.d4)((e=>e.objectBrowser.versionsMode)),S=(0,o.d4)((e=>e.objectBrowser.showDeleted)),y=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),E=(0,o.d4)((e=>e.objectBrowser.selectedInternalPaths)),P=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),U=(0,o.d4)((e=>e.objectBrowser.simplePath)),$=(0,o.d4)((e=>e.objectBrowser.versionInfo)),R=(0,o.d4)((e=>e.objectBrowser.lockingEnabled)),z=(0,o.d4)((e=>e.objectBrowser.downloadRenameModal)),G=(0,o.d4)((e=>e.objectBrowser.selectedPreview)),J=(0,o.d4)((e=>e.objectBrowser.shareFileModalOpen)),M=(0,o.d4)((e=>e.objectBrowser.previewOpen)),K=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),W=(0,o.d4)((e=>e.system.anonymousMode)),H=(0,o.d4)((e=>e.objectBrowser.anonymousAccessOpen)),Y=(0,o.d4)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),Z=(0,o.d4)(B.Nx),q=(0,o.d4)(B.fT),[Q,X]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(!1),[oe,ie]=(0,s.useState)(!1),[ae,le]=(0,s.useState)(!1),[de,ce]=(0,s.useState)(null),[ue,me]=(0,s.useState)(null),[xe,pe]=(0,s.useState)(!1),je=N($.status),be=n.bucketName||"",ge=b.pathname.split(`/browser/${be}/`),_e=2===ge.length?decodeURIComponent(ge[1]):"",fe=_e.split("/").filter((e=>""!==e));let Se=[be];fe.length>0&&(Se=Se.concat(fe));const Oe=(0,s.useRef)(null),Te=(0,s.useRef)(null),Ce=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),we=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],Ee=Se.join("/"),Pe=function(e,t){const n=C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=T(t);return n&&e.push(`.${n}`),e}),[]);return[...new Set(n)].join(",")}(Ce,Ee,we),Ue=C(Ce,Ee,we),$e=(0,v._)([Ee,...Ue],[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Re=(0,v._)(be,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_GET_BUCKET_VERSIONING]),ze=(0,v._)([Ee,...Ue],[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS]),Ge=(0,v._)([Ee,...Ue],we)||W,Je=(0,v._)(be,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),Me=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),Ke=(()=>{let e=!1;if(1===Me.length){e=!!Y.find((e=>e.name===`${Me[0]}`&&e.delete_flag))}return e})(),We=(0,s.useCallback)((()=>{const e=Me[0];!xe&&e&&a.F.buckets.getObjectMetadata(be,{prefix:e}).then((e=>{let t=u()(e.data,"objectMetadata",{});pe(!0),me(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),pe(!0)}))}),[be,Me,xe]);(0,s.useEffect)((()=>{be&&!Ke&&We()}),[be,Me,We,Ke]),(0,s.useEffect)((()=>{g&&_!==be&&t((0,d.rS)())}),[g,_,be,t]),(0,s.useEffect)((()=>{null!==Te.current&&(Te.current.setAttribute("directory",""),Te.current.setAttribute("webkitdirectory",""))}),[Te]),(0,s.useEffect)((()=>{if(1===Me.length){const e=Me[0],t=e.endsWith("/");let n=(0,A.IZ)(ue,e);le(!("none"===n||!$e)),ie(!(!$e||t))}else ie(!1),le(!1)}),[Me,$e,ue]),(0,s.useEffect)((()=>{de||W||a.F.buckets.getBucketQuota(be).then((e=>{let t=null;e.data.quota&&(t=e.data),ce(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),ce(null)}))}),[de,be,W]),(0,s.useEffect)((()=>{Me.length>0?t((0,d.TO)(!0)):0!==Me.length||null!==E||P||t((0,d.TO)(!1))}),[Me,E,t,P]),(0,s.useEffect)((()=>{ne||(t((0,B.ZU)(!0)),se(!0))}),[ne,t,se]),(0,s.useEffect)((()=>{!P&&!Z||W||a.F.buckets.bucketInfo(be).then((e=>{t((0,B.ZU)(!1)),t((0,B.$T)(e.data))})).catch((e=>{t((0,B.ZU)(!1)),t((0,O.C9)((0,m.S)(e)))}))}),[be,Z,t,W,P]),(0,s.useEffect)((()=>{""!==K&&a.F.buckets.getBucketRetentionConfig(K).then((e=>{t((0,d.PJ)(e.data))})).catch((()=>{t((0,d.PJ)(null))}))}),[K,t]);const He=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);Ye(t,""),e.target.value=""}},Ye=(0,s.useCallback)(((e,n)=>{let s="";U&&(s=U.endsWith("/")?U:U+"/");((e,n,s,o)=>{let i=i=>new Promise(((a,l)=>{let r=`api/v1/buckets/${n}/objects/upload`;const c=i.name,h=new Blob([i],{type:i.type}),m=(e=>e.replace(/(^|\/)\.\//g,"/"))(u()(i,"path","")),x=u()(i,"webkitRelativePath","");let p=o;const j=(0,k.E0)(8);""!==m?p=m:""!==x&&(p=x);let b="";if(""!==s||""!==p){const e=p.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;b=`${t}${t.endsWith("/")||""===e||e.startsWith("/")?"":"/"}${e}${!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":""}`}r=""!==b?`${r}?prefix=${encodeURIComponent(b+c)}`:`${r}?prefix=${encodeURIComponent(c)}`;const g=encodeURIComponent(`${n}-${b}-${(new Date).getTime()}-${Math.random()}`);let _=new XMLHttpRequest;_.open("POST",r,!0),W&&_.setRequestHeader("X-Anonymous","1");let f=`An error occurred while uploading the file${e.length>1?"s":""}.`;const v={413:"Error - File size too large"};_.withCredentials=!1,_.onload=function(){if(_.status>=200&&_.status<300)t((0,d.rx)(g)),a({status:_.status}),(0,k.vy)(j);else{if(v[_.status])f=v[_.status];else if(_.response)try{const e=JSON.parse(_.response);f=e.detailedMessage}catch(e){f="something went wrong"}t((0,d.iL)({instanceID:g,msg:f})),l({status:_.status,message:f}),(0,k.vy)(j)}},_.upload.addEventListener("error",(()=>{l(f),t((0,d.iL)({instanceID:g,msg:"A network error occurred."}))})),_.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,d.DW)({instanceID:g,progress:n}))})),_.onerror=()=>{l(f),t((0,d.iL)({instanceID:g,msg:"A network error occurred."}))},_.onloadend=()=>{0===e.length&&t((0,d.Yw)(!0))},_.onabort=()=>{t((0,d.Dm)(g))};const S=new FormData;void 0!==i.size&&(S.append(i.size.toString(),h,c),(0,k.FP)(j,_),t((0,d.cP)({ID:j,bucketName:n,done:!1,instanceID:g,percentage:0,prefix:`${b}${c}`,type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,k.vx)(j,S))}));const a=[];t((0,d.Nu)());for(let t=0;t<e.length;t++){const n=e[t];a.push(i(n))}Promise.allSettled(a).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=a.length,s={errorMessage:"There were some errors during file upload",detailedError:`Uploaded files ${a.length-n.length}/${e}`};t((0,O.C9)(s))}t((0,d.Yw)(!0))}))})(e,be,s,n)}),[be,t,U,W]),Ze=(0,s.useCallback)((e=>{if(e&&e.length>0&&Ge){let n=e[0].path,s=e;Pe.length>0&&(s=e.filter((e=>{const t=T(e.name);return Pe.includes(t)}))),s.length?(Ye(s,n),console.log(`${s.length} Allowed Files Processed out of ${e.length}.`,Ee,...Ue),s.length!==e.length&&t((0,O.C9)({errorMessage:"Upload is restricted.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,O.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Ee,...Ue))}Ge||t((0,O.C9)({errorMessage:"Upload not allowed",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))}),[Ye]),{getRootProps:qe,getInputProps:Qe,isDragActive:Xe,isDragAccept:et}=(0,x.VB)({noClick:!0,onDrop:Ze}),tt=(0,s.useMemo)((()=>({...Fe,...Xe?Le:{},...et?De:{}})),[Xe,et]),nt=e=>{if(t((0,d.A7)(null)),t((0,d.cQ)({status:!1})),y&&null!==E){const e=_e.split("/");e.pop();let t="";e&&e.length>0&&(t=`${e.join("/")}/`),c(`/browser/${encodeURIComponent(be)}/${encodeURIComponent(t)}`)}t((0,d.TO)(!1)),e&&t((0,d.Yw)(!0))};let st=p.c9.now();null!==q&&void 0!==q&&q.creation_date&&(st=p.c9.fromISO(q.creation_date));const ot=(null===Me||void 0===Me?void 0:Me.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",it=[{action:()=>{t((0,V.op)(be))},label:"Download",disabled:!$e||Ke,icon:(0,w.jsx)(h.s3U,{}),tooltip:$e?ot:(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,V.mS)())},label:"Share",disabled:1!==Me.length||!oe||Ke,icon:(0,w.jsx)(h.liv,{}),tooltip:oe?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,V.HS)())},label:"Preview",disabled:1!==Me.length||!ae||Ke,icon:(0,w.jsx)(h.cyn,{}),tooltip:ae?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,V.oz)())},label:"Anonymous Access",disabled:1!==Me.length||!Me[0].endsWith("/")||!Je,icon:(0,w.jsx)(h._kf,{}),tooltip:1===Me.length&&Me[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{X(!0)},label:"Delete",icon:(0,w.jsx)(h.d7y,{}),disabled:!ze||0===Me.length,tooltip:ze?"Delete Selected Files":(0,r.vj)([r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],"delete objects in this bucket")}];return(0,w.jsxs)(s.Fragment,{children:[J&&G&&(0,w.jsx)(ke,{open:J,closeModalAndRefresh:()=>{t((0,d.Lf)(!1)),t((0,d.go)(null))},bucketName:be,dataObject:{name:G.name,last_modified:"",version_id:G.version_id}}),Q&&(0,w.jsx)(Ne,{deleteOpen:Q,selectedBucket:be,selectedObjects:Me,closeDeleteModalAndRefresh:e=>{X(!1),e&&(t((0,O.Hk)("Objects deleted successfully.")),t((0,d.KX)([])),t((0,d.Yw)(!0)))},versioning:$}),ee&&(0,w.jsx)(Be,{open:ee,closeModalAndRefresh:()=>{te(!1)},bucketName:be}),M&&G&&(0,w.jsx)(Ve,{open:M,bucketName:be,actualInfo:{name:G.name||"",last_modified:"",version_id:G.version_id||"",size:G.size||0},onClosePreview:()=>{t((0,d.xE)(!1)),t((0,d.go)(null))}}),!!z&&(0,w.jsx)(re,{open:!!z,closeModal:()=>{t((0,d.Ew)(null))},currentItem:(null===(e=z.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:be,internalPaths:_e,actualInfo:{name:z.name,last_modified:"",version_id:z.version_id,size:z.size}}),H&&(0,w.jsx)(Ae.default,{onClose:()=>{t((0,d.I8)(!1))},bucket:be,modalOpen:H,prefilledRoute:`${Me[0]}*`}),(0,w.jsxs)(h.Mxu,{variant:"full",children:[W&&(0,w.jsx)("div",{style:{paddingBottom:16},children:(0,w.jsx)(Ie,{})}),(0,w.jsx)(h.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,w.jsx)(h.lcx,{icon:(0,w.jsx)("span",{children:(0,w.jsx)(h.brV,{style:{width:30}})}),title:be,subTitle:W?null:(0,w.jsxs)(h.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,w.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,w.jsx)("strong",{children:null!==q&&void 0!==q&&q.creation_date?st.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,w.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,w.jsx)("strong",{children:(null===q||void 0===q?void 0:q.access)||""})]}),q&&(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{className:"detailsSpacer",children:[q.size&&(0,w.jsx)(s.Fragment,{children:(0,j.qO)(q.size)}),q.size&&de&&(0,w.jsxs)(s.Fragment,{children:[" ","/ ",(0,j.qO)(de.quota||0)]}),q.size&&q.objects?" - ":"",q.objects&&(0,w.jsxs)(s.Fragment,{children:[q.objects,"\xa0Object",q.objects&&1!==q.objects?"s":""]})]})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[!W&&(0,w.jsx)(F.A,{tooltip:Re?"Rewind Bucket":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_GET_BUCKET_VERSIONING],"apply rewind in this bucket"),children:(0,w.jsx)(h.$nd,{id:"rewind-objects-list",label:"Rewind",icon:(0,w.jsx)(h.Exy,{color:"alert",dotOnly:!0,invisible:!g,children:(0,w.jsx)(h.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{te(!0)},disabled:!je||!Re})}),(0,w.jsx)(F.A,{tooltip:"Reload List",children:(0,w.jsx)(h.$nd,{id:"refresh-objects-list",label:"Refresh",icon:(0,w.jsx)(h.fNY,{}),variant:"regular",onClick:()=>{f?t((0,d.SK)(!0)):(t((0,d.A3)()),t((0,d.Yw)(!0)))},disabled:!W&&(!(0,v._)(be,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||g)})}),(0,w.jsx)("input",{type:"file",multiple:!0,accept:Pe||void 0,onChange:He,style:{display:"none"},ref:Oe}),(0,w.jsx)("input",{type:"file",multiple:!0,onChange:He,style:{display:"none"},ref:Te}),(0,w.jsx)(L,{bucketName:be,uploadPath:Ee,uploadFileFunction:e=>{Oe&&Oe.current&&Oe.current.click(),e()},uploadFolderFunction:e=>{Te&&Te.current&&Te.current.click(),e()}})]}),bottomBorder:!1})}),(0,w.jsxs)("div",{id:"object-list-wrapper",...qe({style:{...tt}}),children:[(0,w.jsx)("input",{...Qe()}),(0,w.jsxs)(h.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[f?(0,w.jsx)(s.Fragment,{children:null!==E&&(0,w.jsx)(ve,{internalPaths:E,bucketName:be})}):(0,w.jsx)(v.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:be,errorProps:{disabled:!0},children:(0,w.jsxs)(h.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:y?"detailsOpen":"",children:[!W&&(0,w.jsx)(h.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,w.jsx)(I,{bucketName:be,internalPaths:_e,additionalOptions:!je||g?null:(0,w.jsx)(h.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,d.A3)()),t((0,d.lA)(!S)),nt(!0)},checked:S,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,w.jsx)(ye,{})]})}),!W&&(0,w.jsx)(v.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:be,errorProps:{disabled:!0},children:(0,w.jsxs)(D,{open:y,closePanel:()=>{nt(!1)},className:""+(f?"hideListOnSmall":""),children:[Me.length>0&&(0,w.jsx)(h.Smc,{items:it,title:"Selected Objects:"}),null!==E&&(0,w.jsx)(he,{internalPaths:E,bucketName:be,onClosePanel:nt,versioningInfo:$,locking:R})]})})]})]})]})]})};var Ue=n(18218),$e=n(69772),Re=n(48793),ze=n(59707),Ge=n(88617);const Je=e=>{let{bucketName:t}=e;const n=(0,l.jL)(),a=(0,o.d4)(we.s$),c=(0,o.d4)((e=>e.objectBrowser.versionsMode)),u=(0,o.d4)((e=>e.objectBrowser.versionedFile)),m=(0,o.d4)((e=>e.objectBrowser.searchVersions)),x=!(null===a||void 0===a||!a.includes("object-browser-only")),p=(0,i.Zp)(),j=(0,Ue.A)(t,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_DELETE_BUCKET,r.OV.S3_GET_BUCKET_NOTIFICATIONS,r.OV.S3_PUT_BUCKET_NOTIFICATIONS,r.OV.S3_GET_REPLICATION_CONFIGURATION,r.OV.S3_PUT_REPLICATION_CONFIGURATION,r.OV.ADMIN_GET_BUCKET_QUOTA,r.OV.ADMIN_SET_BUCKET_QUOTA,r.OV.S3_PUT_BUCKET_TAGGING,r.OV.S3_GET_BUCKET_TAGGING,r.OV.S3_LIST_BUCKET_VERSIONS,r.OV.S3_GET_BUCKET_POLICY_STATUS,r.OV.S3_DELETE_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),b=(0,w.jsx)(s.Fragment,{children:c?(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(Ee.A,{placeholder:`Start typing to filter versions of ${u}`,onChange:e=>{n((0,d.aj)(e))},value:m})}):(0,w.jsx)(v.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,w.jsx)(Ie,{})})});return(0,s.useEffect)((()=>{n((0,O.ph)("object_browser"))}),[]),(0,w.jsx)(s.Fragment,{children:x?(0,w.jsxs)(h.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,w.jsx)(h.xA9,{children:(0,w.jsx)($e.A,{marginRight:30,marginTop:10})}),(0,w.jsxs)(h.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[b,(0,w.jsx)(ze.A,{})]})]}):(0,w.jsx)(Re.A,{label:(0,w.jsx)(h.EGL,{label:"Object Browser",onClick:()=>{p(r.zZ.OBJECT_BROWSER_VIEW)}}),actions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(v.R,{scopes:r.pC[r.ac.BUCKET_ADMIN],resource:t,errorProps:{disabled:!0},children:(0,w.jsx)(F.A,{tooltip:j?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+r.ac.BUCKET_ADMIN+" permisions.",children:(0,w.jsx)(h.$nd,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:()=>p(`/buckets/${t}/admin`),icon:(0,w.jsx)(h.Zes,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),(0,w.jsx)(Ge.A,{})]}),middleComponent:b})})},Me=()=>{const e=(0,l.jL)(),t=(0,i.g)(),n=(0,i.zy)(),c=(0,o.d4)((e=>e.objectBrowser.loadingVersioning)),u=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),h=(0,o.d4)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.d4)((e=>e.objectBrowser.showDeleted)),x=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),p=(0,o.d4)((e=>e.objectBrowser.loadingLocking)),j=(0,o.d4)((e=>e.objectBrowser.reloadObjectsList)),b=(0,o.d4)((e=>e.objectBrowser.simplePath)),g=(0,o.d4)((e=>e.system.anonymousMode)),_=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),f=(0,o.d4)((e=>e.objectBrowser.records)),v=t.bucketName||"",S=n.pathname.split(`/browser/${encodeURIComponent(v)}/`),O=2===S.length?decodeURIComponent(S[1]):"",T=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==h&&u&&(n=h);e({type:"socket/OBRequest",payload:{bucketName:v,path:t,rewindMode:u||m,date:n}})}),[v,m,h,u,e]),C=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e((0,d.cQ)({status:!1}));let n=O;O.endsWith("/")||""===O||(n=`${O.split("/").slice(0,-1).join("/")}/`),"/"===n&&(n=""),(n!==b||v!==_||t)&&(e((0,d.u)(!0)),T(n))}),[O,e,b,_,v,T]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{e((0,d.vn)(!0)),O.endsWith("/")||""===O?(e((0,d.TO)(!1)),e((0,d.A7)(null)),e((0,d.Qy)(!0))):(e((0,d.oe)(!0)),e((0,d.TO)(!0)),e((0,d.SK)(!0)),e((0,d.A7)(O||"")))}),[v,O,h,u,e]),(0,s.useEffect)((()=>{C(!1)}),[C]),(0,s.useEffect)((()=>{j&&0===f.length&&!x&&C(!0)}),[j,f,x,C]);const y=(0,Ue.A)(v,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||g;return(0,s.useEffect)((()=>{c&&!g&&(y?a.F.buckets.getBucketVersioning(v).then((t=>{e((0,d.AP)(t.data)),e((0,d.vn)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.vn)(!1))})):(e((0,d.vn)(!1)),e((0,d.A3)())))}),[v,c,e,y,g]),(0,s.useEffect)((()=>{p&&(y?a.F.buckets.getBucketObjectLockingStatus(v).then((t=>{e((0,d.xW)(t.data.object_locking_enabled)),e((0,d.Qy)(!1))})).catch((t=>{console.error("Error Getting Object Locking Status: ",t.error.detailedMessage),e((0,d.Qy)(!1))})):(e((0,d.A3)()),e((0,d.Qy)(!1))))}),[v,p,e,y]),(0,w.jsxs)(s.Fragment,{children:[!g&&(0,w.jsx)(Je,{bucketName:v}),(0,w.jsx)(Pe,{})]})}},30718:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(65043),o=n(22166),i=n(89923),a=n(61476),l=n.n(a),r=n(94141),d=n(24241),c=n(70579);const u=e=>{let{id:t,label:n,maxSeconds:o,entity:a,onChange:l}=e;const r=Math.floor(o/86400),u=Math.floor(o%86400/3600),h=Math.floor(o%3600/60),[m,x]=(0,s.useState)(0),[p,j]=(0,s.useState)(0),[b,g]=(0,s.useState)(0),[_,f]=(0,s.useState)(!0),[v,S]=(0,s.useState)(null);(0,s.useEffect)((()=>{x(r),j(u),g(h)}),[r,u,h]),(0,s.useEffect)((()=>{var e,t,n;isNaN(p)||isNaN(m)||isNaN(b)||S((e=m,t=p,n=b,d.c9.now().plus({hours:t+24*e,minutes:n}).toISO()))}),[m,p,b]),(0,s.useEffect)((()=>{if(_&&v){const e=d.c9.fromISO(v).toFormat("yyyy-MM-dd HH:mm:ss");l(e.split(" ").join("T"),!0)}else l("0000-00-00",!1)}),[v,l,_]),(0,s.useEffect)((()=>{let e=!0;(m<0||m>7||m>r||isNaN(m))&&(e=!1),(p<0||p>23||isNaN(p))&&(e=!1),(b<0||b>59||isNaN(b))&&(e=!1),m===r&&(p>u&&(e=!1),p===u&&b>h&&(e=!1)),m<=0&&p<=0&&b<=0&&(e=!1),f(e)}),[v,r,u,h,l,m,p,b]);const O={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,c.jsxs)(i.azJ,{className:"inputItem",children:[(0,c.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,c.jsx)(i.l1Y,{htmlFor:t,children:n})}),(0,c.jsxs)(i.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"7",label:"Days",name:t,onChange:e=>{x(parseInt(e.target.value))},value:m.toString(),sx:O,noLabelMinWidth:!0})}),(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{j(parseInt(e.target.value))},value:p.toString(),sx:O,noLabelMinWidth:!0})}),(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{g(parseInt(e.target.value))},value:b.toString(),sx:O,noLabelMinWidth:!0})})]}),(0,c.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:_&&v?(0,c.jsxs)("div",{className:"validityText",children:[(0,c.jsx)(i.qYV,{}),(0,c.jsxs)("div",{children:[a," will be available until:"]})," ",(0,c.jsx)("div",{className:"validTill",children:d.c9.fromISO(v).toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,c.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var h=n(56483),m=n(64159),x=n(21383),p=n(56629),j=n(53518),b=n(81708),g=n(6035),_=n(93950),f=n.n(_);const v=e=>{let{open:t,closeModalAndRefresh:n,bucketName:a,dataObject:d}=e;const _=(0,x.jL)(),v=(0,o.d4)(m.Rq),S=(0,o.d4)(g.yL),[O,T]=(0,s.useState)(""),[C,w]=(0,s.useState)(!0),[y,E]=(0,s.useState)(!1),[I,A]=(0,s.useState)(""),[N,k]=(0,s.useState)(!0),[B,V]=(0,s.useState)("null"),F=f()(((e,t)=>{k(t),t?A(e):(A(""),T(""))}),300);return(0,s.useEffect)((()=>{_((0,b.Ex)())}),[_]),(0,s.useEffect)((()=>{if(void 0===d.version_id)return v?(p.F.buckets.listObjects(a,{prefix:d.name||"",with_versions:v}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));V(t?`${t.version_id}`:"null")})).catch((e=>{_((0,m.Dy)((0,j.S)(e.error)))})),void w(!1)):(V("null"),void w(!1));V(d.version_id||"null"),w(!1)}),[a,d,v,_]),(0,s.useEffect)((()=>{if(N&&!C){E(!0),T("");const e=new Date(`${I}`),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.F.buckets.shareObject(a,{prefix:d.name||"",version_id:B,expires:""!==I?`${n}s`:""}).then((e=>{T(e.data),E(!1)})).catch((e=>{_((0,m.Dy)((0,j.S)(e.error))),T(""),E(!1)}))}}),[d,I,a,N,T,_,v,C,B]),(0,c.jsx)(s.Fragment,{children:(0,c.jsxs)(r.A,{title:"Share File",titleIcon:(0,c.jsx)(i.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[C&&(0,c.jsx)(i.xA9,{item:!0,xs:12,children:(0,c.jsx)(i.z21,{})}),!C&&(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(i.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,c.jsx)(i.m_M,{placement:"right",tooltip:(0,c.jsxs)("span",{children:["You can reset your session by logging out and logging back in to the web UI. ",(0,c.jsx)("br",{})," ",(0,c.jsx)("br",{}),"You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes. ",(0,c.jsx)("br",{})," ",(0,c.jsx)("br",{}),"You can use ",(0,c.jsx)("b",{children:"mc share"})," as an alternative to this UI, where the session length does not limit the URL validity."]}),children:(0,c.jsxs)("span",{children:["The following URL lets you share this object without requiring a login. ",(0,c.jsx)("br",{}),"The URL expires automatically at the earlier of your configured time (",(0,h.K7)(S),") or the expiration of your current web session."]})})}),(0,c.jsx)("br",{}),(0,c.jsx)(i.xA9,{item:!0,xs:12,children:(0,c.jsx)(u,{id:"date",label:"Active for",maxSeconds:S,onChange:F,entity:"Link"})}),(0,c.jsx)(i.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,c.jsx)(i.EmB,{actionButton:(0,c.jsx)(l(),{text:O,children:(0,c.jsx)(i.$nd,{id:"copy-path",variant:"regular",onClick:()=>{_((0,m.h0)("Share URL Copied to clipboard"))},disabled:""===O||y,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,c.jsx)(i.TdU,{})})}),children:O})})]})]})})}},37524:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(65043),o=n(94141),i=n(89923),a=n(33097),l=n.n(a),r=n(93445),d=n(56629),c=n(79355),u=n(97806),h=n(6584),m=n(70579);c.EA.workerSrc="./scripts/pdf.worker.min.mjs";const x=e=>{let{path:t,loading:n,onLoad:o,downloadFile:a}=e;const[l,r]=(0,s.useState)(!1),[d,c]=(0,s.useState)(0);if(!t)return null;const x=d>5?5:d,p=Array.from(Array(x).keys());return(0,m.jsxs)(s.Fragment,{children:[l&&0===d&&(0,m.jsx)(i.Wei,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!l&&(0,m.jsx)(i.Wei,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!l&&(0,m.jsx)(i.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(u.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;c(t.numPages||0),r(!1),o()},onLoadError:e=>{r(!0),o(),console.error(e)},children:p.map((e=>(0,m.jsx)(h.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},`render-page-${e}`)))})})]})};var p=n(48245),j=n(21383);const b=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const a=(0,j.jL)(),[c,u]=(0,s.useState)(!0),[h,b]=(0,s.useState)(null),[g,_]=(0,s.useState)(!1),f=(null===n||void 0===n?void 0:n.name)||"",v=(0,s.useCallback)((()=>{g||d.F.buckets.getObjectMetadata(t,{prefix:f,versionID:n.version_id||""}).then((e=>{let t=l()(e.data,"objectMetadata",{});_(!0),b(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),_(!0)}))}),[t,f,g,n.version_id]);(0,s.useEffect)((()=>{t&&f&&v()}),[t,f,v]);let S="";if(n){let e=document.baseURI.replace(window.location.origin,"");S=`${window.location.origin}${e}api/v1/buckets/${encodeURIComponent(t)}/objects/download?preview=true&prefix=${encodeURIComponent(n.name||"")}`,n.version_id&&(S=S.concat(`&version_id=${n.version_id}`))}let O=(0,r.IZ)(h,f);const T=()=>{u(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==O&&c&&(0,m.jsx)(i.xA9,{item:!0,xs:12,children:(0,m.jsx)(i.z21,{})}),g?(0,m.jsxs)(i.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===O&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:T,children:(0,m.jsx)("source",{src:S,type:"video/mp4"})}),"audio"===O&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:T,children:(0,m.jsx)("source",{src:S,type:"audio/mpeg"})}),"image"===O&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:S,alt:"preview",onLoad:T}),"pdf"===O&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(x,{path:S,onLoad:T,loading:c,downloadFile:()=>(0,p._)(a,t,S,n)})}),"none"===O&&(0,m.jsx)("div",{children:(0,m.jsx)(i.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==O&&"video"!==O&&"audio"!==O&&"image"!==O&&"pdf"!==O&&(0,m.jsx)("div",{className:"iframeBase "+(c?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:S,title:"File Preview",allowTransparency:!0,className:`iframeContainer ${o?"fullHeight":O}`,onLoad:T,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},g=e=>{let{open:t,bucketName:n,actualInfo:a,onClosePreview:l}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.A,{modalOpen:t,title:`Preview - ${null===a||void 0===a?void 0:a.name}`,onClose:l,wideLimit:!1,titleIcon:(0,m.jsx)(i.jG,{}),children:(0,m.jsx)(b,{bucketName:n,actualInfo:a})})})}},72237:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(65043),o=n(70579);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,o.jsx)(s.Suspense,{fallback:t,children:(0,o.jsx)(e,{...n})})}}},25448:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(65043),o=n(20649);const i=(e,t)=>{const[n,i]=(0,s.useState)(!1);return[n,(n,s,a,l)=>{i(!0),o.A.invoke(n,s,a,l).then((t=>{i(!1),e(t)})).catch((e=>{i(!1),t(e)}))}]}},94141:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(65043),o=n(22166),i=n(89923),a=n(21383),l=n(64159),r=n(49555),d=n(70579);const c=e=>{let{onClose:t,modalOpen:n,title:c,children:u,wideLimit:h=!0,titleIcon:m=null,iconColor:x="default",sx:p}=e;const j=(0,a.jL)(),[b,g]=(0,s.useState)(!1),_=(0,o.d4)((e=>e.system.modalSnackBar));(0,s.useEffect)((()=>{j((0,l.h0)(""))}),[j]),(0,s.useEffect)((()=>{if(_){if(""===_.message)return void g(!1);"error"!==_.type&&g(!0)}}),[_]);let f="";return _&&(f=_.detailedErrorMsg,(""===f||f&&f.length<5)&&(f=_.message)),(0,d.jsxs)(i.ngX,{onClose:t,open:n,title:c,titleIcon:m,widthLimit:h,sx:p,iconColor:x,children:[(0,d.jsx)(r.A,{isModal:!0}),(0,d.jsx)(i.qb_,{onClose:()=>{g(!1),j((0,l.h0)(""))},open:b,message:f,mode:"inline",variant:"error"===_.type?"error":"default",autoHideDuration:"error"===_.type?10:5,condensed:!0}),u]})}},81708:(e,t,n)=>{n.d(t,{Ex:()=>p,HS:()=>h,mS:()=>m,op:()=>u,oz:()=>x});var s=n(80907),o=n(56483),i=n(37414),a=n(93445),l=n(6035),r=n(64159),d=n(24241),c=n(56629);const u=(0,s.zD)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:c}=t;const u=n(),h=t=>{const n=encodeURIComponent(`${e}-${t.name}-${(new Date).getTime()}-${Math.random()}`),s=(0,i.E0)(8),o=(0,a.RG)(e,t.name,t.version_id,t.size,null,s,(e=>{c((0,l.DW)({instanceID:n,progress:e}))}),(()=>{c((0,l.rx)(n))}),(e=>{c((0,l.iL)({instanceID:n,msg:e}))}),(()=>{c((0,l.Dm)(n))}),(()=>{c((0,r.Hk)("File download will be handled directly by the browser."))}));(0,i.FP)(s,o),c((0,l.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==u.objectBrowser.selectedObjects.length){let t=[];const n=e=>u.objectBrowser.selectedObjects.includes(e.name);if(t=u.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void c((0,l.Ew)(t[0]));h(t[0])}else if(1===t.length)h(t[0]);else if(t.length>1){const n=`${d.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss")}_files_list.zip`,s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log(`Skipping ${null===t||void 0===t?void 0:t.name} from download.`),e}),[]);return void await(0,a.Fj)(e,s,n)}}})),h=(0,s.zD)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.xE)(!0)))}})),m=(0,s.zD)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.Lf)(!0)))}})),x=(0,s.zD)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,l.I8)(!0))})),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",(async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return c.F.buckets.getMaxShareLinkExp().then((e=>{s((0,l.QV)(e.data.exp))})).catch((async e=>n(e.error)))}))},48245:(e,t,n)=>{n.d(t,{_:()=>r});var s=n(56483),o=n(37414),i=n(93445),a=n(6035),l=n(64159);const r=(e,t,n,r)=>{var d;const c=encodeURIComponent(`${t}-${r.name}-${(new Date).getTime()}-${Math.random()}`),u=(0,s.oK)().toLowerCase().includes("win");if(((null===(d=r.name)||void 0===d?void 0:d.length)||0)>200&&u)return void e((0,a.Jl)(!0));const h=(0,o.E0)(8),m=(0,i.RG)(t,n,r.version_id,r.size||0,null,h,(t=>{e((0,a.DW)({instanceID:c,progress:t}))}),(()=>{e((0,a.rx)(c))}),(t=>{e((0,a.iL)({instanceID:c,msg:t}))}),(()=>{e((0,a.Dm)(c))}),(()=>{e((0,l.Hk)("File download will be handled directly by the browser."))}));(0,o.FP)(h,m),e((0,a.cP)({ID:h,bucketName:t,done:!1,instanceID:c,percentage:0,prefix:r.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}}}]);
//# sourceMappingURL=9645.78b01677.chunk.js.map